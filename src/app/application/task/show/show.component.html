
<div class="header" >
  <h1>Affectation</h1>
  <button mat-icon-button color="warn"  type="button" (click)="openConfirmationDialog()">
    <mat-icon>delete</mat-icon>
  </button>
  
</div>

<div class="update-task">
  <div class="content">
    <form [formGroup]="taskForm" (submit)="updateTask()" >

      <mat-form-field appearance="fill">
        <mat-label>Type</mat-label>
        <mat-select formControlName="type" >
          <mat-option *ngFor="let n of typeOptions" [value]="n.type">{{n.type}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field *ngIf="taskForm.get('type').value === 'Affecté'">
       <mat-label>Nom de l'affectation</mat-label>
       <input matInput placeholder="Rechercher une affectation" formControlName="title" [matAutocomplete]="auto" />
       <mat-autocomplete #auto="matAutocomplete">
         <mat-option *ngFor="let ITask of filteredTasks | async" [value]="ITask.title">
           {{ ITask.title }}
         </mat-option>
       </mat-autocomplete>
       </mat-form-field>
      
       <mat-form-field appearance="fill">
        <mat-label>Entrez une plage de dates</mat-label>
        <mat-date-range-input [rangePicker]="picker">
          <input matStartDate placeholder="Date début" formControlName="startDate">
          <input matEndDate placeholder="Date fin"   formControlName="endDate">
        </mat-date-range-input>
        <mat-hint>DD/MM/YYYY – DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-date-range-picker #picker  ></mat-date-range-picker>
      </mat-form-field>
      

      <mat-form-field>
        <mat-label>Description</mat-label>
        <textarea
          matInput
          placeholder="Description"
          formControlName="description"
        ></textarea>
      </mat-form-field> 
   
      <button
        [disabled]="taskForm.invalid"
        type="submit"
        mat-raised-button
        color="primary"
       >
        Modifier
      </button>

      <button mat-raised-button color="Warn" type="button" (click)="onNoClick()" >Annuler</button>

    </form>
  </div>
</div>
